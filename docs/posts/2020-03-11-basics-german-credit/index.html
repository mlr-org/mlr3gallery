<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #545454; font-weight: bold; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #a1024a; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007faa; font-weight: bold; } /* ControlFlow */
code span.ch { color: #008000; } /* Char */
code span.cn { color: #d91e18; } /* Constant */
code span.co { color: #545454; } /* Comment */
code span.cv { color: #545454; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #aa5d00; } /* DataType */
code span.dv { color: #a1024a; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #a1024a; } /* Float */
code span.fu { color: #4254a7; } /* Function */
code span.im { } /* Import */
code span.in { color: #545454; font-weight: bold; } /* Information */
code span.kw { color: #007faa; font-weight: bold; } /* Keyword */
code span.op { color: #696969; } /* Operator */
code span.ot { color: #007faa; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #008000; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #008000; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #008000; } /* VerbatimString */
code span.wa { color: #545454; font-weight: bold; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>mlr3gallery: mlr3 Basics - German Credit</title>

<meta property="description" itemprop="description" content="In this use case, we teach the basics of mlr3 by training different models on&#10;the German credit dataset."/>

<link rel="canonical" href="https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2020-03-11"/>
<meta property="article:created" itemprop="dateCreated" content="2020-03-11"/>
<meta name="article:author" content="Martin Binder"/>
<meta name="article:author" content="Florian Pfisterer"/>
<meta name="article:author" content="Michel Lang"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="mlr3gallery: mlr3 Basics - German Credit"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="In this use case, we teach the basics of mlr3 by training different models on&#10;the German credit dataset."/>
<meta property="og:url" content="https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/"/>
<meta property="og:image" content="https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-8-1.png"/>
<meta property="og:image:width" content="1248"/>
<meta property="og:image:height" content="3456"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="mlr3gallery"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="mlr3gallery: mlr3 Basics - German Credit"/>
<meta property="twitter:description" content="In this use case, we teach the basics of mlr3 by training different models on&#10;the German credit dataset."/>
<meta property="twitter:url" content="https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/"/>
<meta property="twitter:image" content="https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-8-1.png"/>
<meta property="twitter:image:width" content="1248"/>
<meta property="twitter:image:height" content="3456"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="mlr3gallery: mlr3 Basics - German Credit"/>
<meta name="citation_fulltext_html_url" content="https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/"/>
<meta name="citation_online_date" content="2020/03/11"/>
<meta name="citation_publication_date" content="2020/03/11"/>
<meta name="citation_author" content="Martin Binder"/>
<meta name="citation_author" content="Florian Pfisterer"/>
<meta name="citation_author" content="Michel Lang"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","categories","author","date","description","output","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["mlr3 Basics - German Credit"]},{"type":"character","attributes":{},"value":["visualization","classification","feature importance","german credit"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Martin Binder"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Florian Pfisterer"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Michel Lang"]}]}]},{"type":"character","attributes":{},"value":["03-11-2020"]},{"type":"character","attributes":{},"value":["In this use case, we teach the basics of mlr3 by training different models on\nthe German credit dataset."]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","css"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["../../custom.css"]}]}]},{"type":"character","attributes":{},"value":["https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/"]},{"type":"character","attributes":{},"value":["https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-10-1.png","2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-22-1.png","2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-44-1.png","2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-8-1.png","2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-9-1.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

</style>

<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createIndex() {
  var options = {
    keys: [
      "title",
      "categories",
      "description",
      "contents"
    ]
  };
  return new window.Fuse([],options);
}

function createFuseIndex() {

  // create fuse index
  var options = { keys: ["title", "description", "contents"] };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
            keys: [
              { name: 'title', weight: 20 },
              { name: 'categories', weight: 15 },
              { name: 'description', weight: 10 },
              { name: 'contents', weight: 5 },
            ],
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
            .filter(function(item) { return !!item.description; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description}
                </div>
                <div class="search-item-preview">
                  <img src="${suggestion.preview ? offsetURL(suggestion.preview) : ''}"</img>
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: hidden;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->

  <link rel="stylesheet" href="../../custom.css" type="text/css"/>

</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"mlr3 Basics - German Credit","description":"In this use case, we teach the basics of mlr3 by training different models on\nthe German credit dataset.","authors":[{"author":"Martin Binder","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""},{"author":"Florian Pfisterer","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""},{"author":"Michel Lang","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2020-03-11T00:00:00.000+00:00","citationText":"Binder, et al., 2020"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://mlr3.mlr-org.com">
<img src="../../images/logo.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">mlr3gallery</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="https://github.com/mlr-org/mlr3gallery">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>mlr3 Basics - German Credit</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:visualization" class="dt-tag">visualization</a>
  <a href="../../index.html#category:classification" class="dt-tag">classification</a>
  <a href="../../index.html#category:feature_importance" class="dt-tag">feature importance</a>
  <a href="../../index.html#category:german_credit" class="dt-tag">german credit</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>In this use case, we teach the basics of mlr3 by training different models on the German credit dataset.</p></p>
</div>

<div class="d-byline">
  Martin Binder  
  
,   Florian Pfisterer  
  
,   Michel Lang  
  
<br/>03-11-2020
</div>

<div class="d-article">
<h2 id="intro">Intro</h2>
<p>This is the first part in a serial of tutorials. The other parts of this series can be found here:</p>
<ul>
<li><a href="https://mlr3gallery.mlr-org.com/posts/2020-03-11-mlr3tuning-tutorial-german-credit/">Part II - Tuning</a></li>
<li><a href="https://mlr3gallery.mlr-org.com/posts/2020-03-11-mlr3pipelines-tutorial-german-credit/">Part III - Pipelines</a></li>
</ul>
<p>We will walk through this tutorial interactively. The text is kept short to be followed in real time.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Ensure all packages used in this tutorial are installed. This includes packages from the <code>mlr3</code> family, as well as other packages for data handling, cleaning and visualization which we are going to use (<a href="https://cran.r-project.org/package=DataExplorer">DataExplorer</a>, <a href="https://cran.r-project.org/package=data.table">data.table</a>, <a href="https://cran.r-project.org/package=ggplot2">ggplot2</a>, <a href="https://cran.r-project.org/package=rchallenge">rchallenge</a>, and <a href="https://cran.r-project.org/package=skimr">skimr</a>).</p>
<p>Then, load the main packages we are going to use:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='http://r-datatable.com'>"data.table"</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://mlr3.mlr-org.com'>"mlr3"</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://mlr3learners.mlr-org.com'>"mlr3learners"</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://mlr3viz.mlr-org.com'>"mlr3viz"</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='http://ggplot2.tidyverse.org'>"ggplot2"</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="machine-learning-use-case-german-credit-data">Machine Learning Use Case: German Credit Data</h2>
<p>The German credit data was originally donated in 1994 by Prof.Dr.Hans Hoffman of the University of Hamburg. A description can be found at the <a href="https://archive.ics.uci.edu/ml/datasets/Statlog+%28German+Credit+Data%29">UCI repository</a>. The goal is to classify people by their credit risk (good or bad) using 20 personal, demographic and financial features:</p>
<table>
<thead>
<tr class="header">
<th>Feature Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>age</td>
<td>age in years</td>
</tr>
<tr class="even">
<td>amount</td>
<td>amount asked by applicant</td>
</tr>
<tr class="odd">
<td>credit_history</td>
<td>past credit history of applicant at this bank</td>
</tr>
<tr class="even">
<td>duration</td>
<td>duration of the credit in months</td>
</tr>
<tr class="odd">
<td>employment_duration</td>
<td>present employment since</td>
</tr>
<tr class="even">
<td>foreign_worker</td>
<td>is applicant foreign worker?</td>
</tr>
<tr class="odd">
<td>housing</td>
<td>type of apartment rented, owned, for free / no payment</td>
</tr>
<tr class="even">
<td>installment_rate</td>
<td>installment rate in percentage of disposable income</td>
</tr>
<tr class="odd">
<td>job</td>
<td>current job information</td>
</tr>
<tr class="even">
<td>number_credits</td>
<td>number of existing credits at this bank</td>
</tr>
<tr class="odd">
<td>other_debtors</td>
<td>other debtors/guarantors present?</td>
</tr>
<tr class="even">
<td>other_installment_plans</td>
<td>other installment plans the applicant is paying</td>
</tr>
<tr class="odd">
<td>people_liable</td>
<td>number of people being liable to provide maintenance</td>
</tr>
<tr class="even">
<td>personal_status_sex</td>
<td>combination of sex and personal status of applicant</td>
</tr>
<tr class="odd">
<td>present_residence</td>
<td>present residence since</td>
</tr>
<tr class="even">
<td>property</td>
<td>properties that applicant has</td>
</tr>
<tr class="odd">
<td>purpose</td>
<td>reason customer is applying for a loan</td>
</tr>
<tr class="even">
<td>savings</td>
<td>savings accounts/bonds at this bank</td>
</tr>
<tr class="odd">
<td>status</td>
<td>status/balance of checking account at this bank</td>
</tr>
<tr class="even">
<td>telephone</td>
<td>is there any telephone registered for this customer?</td>
</tr>
</tbody>
</table>
<h3 id="importing-the-data">Importing the Data</h3>
<p>The dataset we are going to use is a transformed version of this German credit dataset, as provided by the <a href="https://cran.r-project.org/package=rchallenge">rchallenge</a> package (this transformed dataset was proposed by Ulrike Grmping, with factors instead of dummy variables and corrected features):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"german"</span>, package <span class='op'>=</span> <span class='st'>"rchallenge"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>First, well do a thorough investigation of the dataset.</p>
<h3 id="exploring-the-data">Exploring the Data</h3>
<p>We can get a quick overview of our dataset using Rs summary function:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/dim.html'>dim</a></span><span class='op'>(</span><span class='va'>german</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1000   21</code></pre>
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>german</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   1000 obs. of  21 variables:
 $ status                 : Factor w/ 4 levels &quot;no checking account&quot;,..: 1 2 4 1 1 4 4 2 4 2 ...
 $ duration               : int  6 48 12 42 24 36 24 36 12 30 ...
 $ credit_history         : Factor w/ 5 levels &quot;delay in paying off in the past&quot;,..: 5 3 5 3 4 3 3 3 3 5 ...
 $ purpose                : Factor w/ 11 levels &quot;others&quot;,&quot;car (new)&quot;,..: 4 4 7 3 1 7 3 2 4 1 ...
 $ amount                 : int  1169 5951 2096 7882 4870 9055 2835 6948 3059 5234 ...
 $ savings                : Factor w/ 5 levels &quot;unknown/no savings account&quot;,..: 5 1 1 1 1 5 3 1 4 1 ...
 $ employment_duration    : Factor w/ 5 levels &quot;unemployed&quot;,&quot;&lt; 1 yr&quot;,..: 5 3 4 4 3 3 5 3 4 1 ...
 $ installment_rate       : Ord.factor w/ 4 levels &quot;&gt;= 35&quot;&lt;&quot;25 &lt;= ... &lt; 35&quot;&lt;..: 4 2 2 2 3 2 3 2 2 4 ...
 $ personal_status_sex    : Factor w/ 4 levels &quot;male : divorced/separated&quot;,..: 3 2 3 3 3 3 3 3 1 4 ...
 $ other_debtors          : Factor w/ 3 levels &quot;none&quot;,&quot;co-applicant&quot;,..: 1 1 1 3 1 1 1 1 1 1 ...
 $ present_residence      : Ord.factor w/ 4 levels &quot;&lt; 1 yr&quot;&lt;&quot;1 &lt;= ... &lt; 4 yrs&quot;&lt;..: 4 2 3 4 4 4 4 2 4 2 ...
 $ property               : Factor w/ 4 levels &quot;unknown / no property&quot;,..: 1 1 1 2 4 4 2 3 1 3 ...
 $ age                    : int  67 22 49 45 53 35 53 35 61 28 ...
 $ other_installment_plans: Factor w/ 3 levels &quot;bank&quot;,&quot;stores&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
 $ housing                : Factor w/ 3 levels &quot;for free&quot;,&quot;rent&quot;,..: 2 2 2 3 3 3 2 1 2 2 ...
 $ number_credits         : Ord.factor w/ 4 levels &quot;1&quot;&lt;&quot;2-3&quot;&lt;&quot;4-5&quot;&lt;..: 2 1 1 1 2 1 1 1 1 2 ...
 $ job                    : Factor w/ 4 levels &quot;unemployed/unskilled - non-resident&quot;,..: 3 3 2 3 3 2 3 4 2 4 ...
 $ people_liable          : Factor w/ 2 levels &quot;0 to 2&quot;,&quot;3 or more&quot;: 1 1 2 2 2 2 1 1 1 1 ...
 $ telephone              : Factor w/ 2 levels &quot;no&quot;,&quot;yes (under customer name)&quot;: 2 1 1 1 1 2 1 2 1 1 ...
 $ foreign_worker         : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ credit_risk            : Factor w/ 2 levels &quot;good&quot;,&quot;bad&quot;: 1 2 1 1 2 1 1 1 1 2 ...</code></pre>
</div>
<p>Our dataset has 1000 observations and 21 columns. The variable we want to predict is <code>credit_risk</code> (either good or bad), i.e., we aim to classify people by their credit risk.</p>
<p>We also recommend the packages <a href="https://cran.r-project.org/package=skimr">skimr</a> and <a href="https://cran.r-project.org/package=DataExplorer">DataExplorer</a> as they create very well readable and understandable overviews:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>skimr</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>german</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<caption><span id="tab:unnamed-chunk-5">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">german</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">21</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">18</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">status</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">: 394, no : 274, : 269, 0&lt;=: 63</td>
</tr>
<tr class="even">
<td style="text-align: left;">credit_history</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">no : 530, all: 293, exi: 88, cri: 49</td>
</tr>
<tr class="odd">
<td style="text-align: left;">purpose</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">fur: 280, oth: 234, car: 181, car: 103</td>
</tr>
<tr class="even">
<td style="text-align: left;">savings</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">unk: 603, : 183, : 103, 100: 63</td>
</tr>
<tr class="odd">
<td style="text-align: left;">employment_duration</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">1 &lt;: 339, &gt;= : 253, 4 &lt;: 174, &lt; 1: 172</td>
</tr>
<tr class="even">
<td style="text-align: left;">installment_rate</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">&lt; 2: 476, 25 : 231, 20 : 157, &gt;= : 136</td>
</tr>
<tr class="odd">
<td style="text-align: left;">personal_status_sex</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mal: 548, fem: 310, fem: 92, mal: 50</td>
</tr>
<tr class="even">
<td style="text-align: left;">other_debtors</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">non: 907, gua: 52, co-: 41</td>
</tr>
<tr class="odd">
<td style="text-align: left;">present_residence</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">&gt;= : 413, 1 &lt;: 308, 4 &lt;: 149, &lt; 1: 130</td>
</tr>
<tr class="even">
<td style="text-align: left;">property</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">bui: 332, unk: 282, car: 232, rea: 154</td>
</tr>
<tr class="odd">
<td style="text-align: left;">other_installment_plans</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">non: 814, ban: 139, sto: 47</td>
</tr>
<tr class="even">
<td style="text-align: left;">housing</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">ren: 713, for: 179, own: 108</td>
</tr>
<tr class="odd">
<td style="text-align: left;">number_credits</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">1: 633, 2-3: 333, 4-5: 28, &gt;= : 6</td>
</tr>
<tr class="even">
<td style="text-align: left;">job</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">ski: 630, uns: 200, man: 148, une: 22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">people_liable</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">0 t: 845, 3 o: 155</td>
</tr>
<tr class="even">
<td style="text-align: left;">telephone</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">no: 596, yes: 404</td>
</tr>
<tr class="odd">
<td style="text-align: left;">foreign_worker</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">no: 963, yes: 37</td>
</tr>
<tr class="even">
<td style="text-align: left;">credit_risk</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">goo: 700, bad: 300</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">duration</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20.90</td>
<td style="text-align: right;">12.06</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">12.0</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">24.00</td>
<td style="text-align: right;">72</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">amount</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3271.26</td>
<td style="text-align: right;">2822.74</td>
<td style="text-align: right;">250</td>
<td style="text-align: right;">1365.5</td>
<td style="text-align: right;">2319.5</td>
<td style="text-align: right;">3972.25</td>
<td style="text-align: right;">18424</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">35.55</td>
<td style="text-align: right;">11.38</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">27.0</td>
<td style="text-align: right;">33.0</td>
<td style="text-align: right;">42.00</td>
<td style="text-align: right;">75</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
<p>Prior to calling <a href="https://cran.r-project.org/package=DataExplorer">DataExplorer</a>, we shorten the (very lengthy) factor levels of the german credit data set to get plots which nicely fit on the screen (no need to dig into this):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>german_short</span> <span class='op'>=</span> <span class='va'>german</span>
<span class='va'>is_factor</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>german_short</span>, <span class='va'>is.factor</span><span class='op'>)</span>
<span class='va'>german_short</span><span class='op'>[</span><span class='va'>is_factor</span><span class='op'>]</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>lapply</a></span><span class='op'>(</span><span class='va'>german</span><span class='op'>[</span><span class='va'>is_factor</span><span class='op'>]</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/abbreviate.html'>abbreviate</a></span><span class='op'>(</span><span class='fu'>mlr3misc</span><span class='fu'>::</span><span class='fu'><a href='https://mlr3misc.mlr-org.com/reference/str_trunc.html'>str_trunc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, <span class='fl'>16</span>, <span class='st'>"..."</span><span class='op'>)</span>, <span class='fl'>12</span><span class='op'>)</span>
  <span class='va'>x</span>
<span class='op'>}</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>DataExplorer</span><span class='fu'>::</span><span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_bar.html'>plot_bar</a></span><span class='op'>(</span><span class='va'>german_short</span>, nrow <span class='op'>=</span> <span class='fl'>6</span>, ncol <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-8-1.png" width="100%" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>DataExplorer</span><span class='fu'>::</span><span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_histogram.html'>plot_histogram</a></span><span class='op'>(</span><span class='va'>german_short</span>, nrow <span class='op'>=</span> <span class='fl'>1</span>, ncol <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-9-1.png" width="100%" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'>DataExplorer</span><span class='fu'>::</span><span class='fu'><a href='http://boxuancui.github.io/DataExplorer/reference/plot_boxplot.html'>plot_boxplot</a></span><span class='op'>(</span><span class='va'>german_short</span>, by <span class='op'>=</span> <span class='st'>"credit_risk"</span>, nrow <span class='op'>=</span> <span class='fl'>1</span>, ncol <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-10-1.png" width="100%" /></p>
</div>
<p>During this exploratory analysis meaningful discoveries could be:</p>
<ul>
<li>Skewed distributions</li>
<li>Missing values</li>
<li>Empty / rare factor variables</li>
</ul>
<p>An explanatory analysis is crucial to get a feeling for your data. On the other hand the data can be validated this way. Non-plausible data can be investigated or outliers can be removed.</p>
<p>After feeling confident with the data, we want to do modeling now.</p>
<h2 id="modeling">Modeling</h2>
<p>Considering how we are going to tackle the problem of classifying the credit risk relates closely to what <code>mlr3</code> entities we will use.</p>
<p>The typical questions that arise when building a machine learning workflow are:</p>
<ul>
<li>What is the problem we are trying to solve?</li>
<li>What are appropriate learning algorithms?</li>
<li>How do we evaluate good performance?</li>
</ul>
<p>More systematically in <code>mlr3</code> they can be expressed via five components:</p>
<ol type="1">
<li>The <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Task</code></a> definition.</li>
<li>The <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learner</code></a> definition.</li>
<li>The training.</li>
<li>The prediction.</li>
<li>The evaluation via one or multiple <a href="https://mlr3.mlr-org.com/reference/Measure.html"><code>Measures</code></a>.</li>
</ol>
<h3 id="task-definition">Task Definition</h3>
<p>First, we are interested in the target which we want to model. Most supervised machine learning problems are <strong>regression</strong> or <strong>classification</strong> problems. However, note that other problems include unsupervised learning or time-to-event data (covered in <a href="https://mlr3proba.mlr-org.com">mlr3proba</a>).</p>
<p>Within <code>mlr3</code>, to distinguish between these problems, we define <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Tasks</code></a>. If we want to solve a classification problem, we define a classification task  <a href="https://mlr3.mlr-org.com/reference/TaskClassif.html"><code>TaskClassif</code></a>. For a regression problem, we define a regression task  <a href="https://mlr3.mlr-org.com/reference/TaskRegr.html"><code>TaskRegr</code></a>.</p>
<p>In our case it is clearly our objective to model or predict the binary <code>factor</code> variable <code>credit_risk</code>. Thus, we define a <code>TaskClassif</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>task</span> <span class='op'>=</span> <span class='va'><a href='https://mlr3.mlr-org.com/reference/TaskClassif.html'>TaskClassif</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span><span class='st'>"GermanCredit"</span>, <span class='va'>german</span>, target <span class='op'>=</span> <span class='st'>"credit_risk"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Note that the German credit data is also given as an example task which ships with the <code>mlr3</code> package. Thus, you actually dont need to construct it yourself, just call <code>tsk("german_credit")</code> to retrieve the object from the dictionary <a href="https://mlr3.mlr-org.com/reference/mlr_tasks.html"><code>mlr_tasks</code></a>.</p>
<h3 id="learner-definition">Learner Definition</h3>
<p>After having decided <em>what</em> should be modeled, we need to decide on <em>how</em>. This means we need to decide which learning algorithms, or <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learners</code></a> are appropriate. Using prior knowledge (e.g.knowing that it is a classification task or assuming that the classes are linearly separable) one ends up with one or more suitable <code>Learner</code>s.</p>
<p>Many learners can be obtained via the <a href="https://mlr3learners.mlr-org.com">mlr3learners</a> package. Additionally, many learners are provided via the <code>mlr3learners</code> <a href="https://github.com/mlr3learners">github organization</a>. These two resources combined account for a large fraction of standard learning algorithms. As <code>mlr3</code> usually only wraps learners from packages, it is even easy to create a formal <code>Learner</code> by yourself. You may find the section about <a href="https://mlr3book.mlr-org.com/extending.html">extending mlr3</a> in the <a href="https://mlr3book.mlr-org.com">mlr3book</a> very helpful. If you happen to write your own <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learner</code></a> in <code>mlr3</code>, we would be happy if you share it with the <code>mlr3</code> community.</p>
<p>All available <code>Learner</code>s (i.e.all which you have installed from <code>mlr3</code>, <code>mlr3learners</code>, the <a href="https://github.com/mlr3learners/">mlr3learners github organization</a>, or self-written ones) are registered in the dictionary <a href="https://mlr3.mlr-org.com/reference/mlr_learners.html"><code>mlr_learners</code></a>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>mlr_learners</span>
</code></pre>
</div>
<pre><code>&lt;DictionaryLearner&gt; with 28 stored values
Keys: classif.cv_glmnet, classif.debug, classif.featureless,
  classif.glmnet, classif.kknn, classif.lda, classif.log_reg,
  classif.multinom, classif.naive_bayes, classif.qda, classif.ranger,
  classif.rpart, classif.svm, classif.xgboost, regr.cv_glmnet,
  regr.featureless, regr.glmnet, regr.kknn, regr.km, regr.lm,
  regr.ranger, regr.rpart, regr.svm, regr.xgboost, surv.cv_glmnet,
  surv.glmnet, surv.ranger, surv.xgboost</code></pre>
</div>
<p>For our problem, a suitable learner could be one of the following: Logistic regression, CART, random forest (or many more).</p>
<p>A learner can be initialized with the <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>lrn()</code></a> function and the name of the learner, e.g., <code>lrn("classif.xxx")</code>. Use <code>?mlr_learners_xxx</code> to open the help page of a learner named <code>xxx</code>, or follow the link on the <a href="https://mlr3learners.mlr-org.com/reference/index.html">rendered overview page</a>.</p>
<p>For example, a logistic regression can be initialized in the following manner (logistic regression uses Rs <code>glm()</code> function and is provided by the <code>mlr3learners</code> package):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://mlr3learners.mlr-org.com'>"mlr3learners"</a></span><span class='op'>)</span>
<span class='va'>learner_logreg</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span><span class='op'>(</span><span class='st'>"classif.log_reg"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>learner_logreg</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&lt;LearnerClassifLogReg:classif.log_reg&gt;
* Model: -
* Parameters: list()
* Packages: stats
* Predict Type: response
* Feature types: logical, integer, numeric, character, factor, ordered
* Properties: twoclass, weights</code></pre>
</div>
<h3 id="training">Training</h3>
<p>Training is the procedure, where a model is fitted on the (training) data.</p>
<h4 id="logistic-regression">Logistic Regression</h4>
<p>We start with the example of the logistic regression. However, you will immediately see that the procedure generalizes to any learner very easily.</p>
<p>An initialized learner can be trained on data using <code>$train()</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learner_logreg</span><span class='op'>$</span><span class='fu'>train</span><span class='op'>(</span><span class='va'>task</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Typically, in machine learning, one does not use the full data which is available but a subset, the so-called training data.</p>
<p>To efficiently perform a split of the data one could do the following:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>train_set</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>task</span><span class='op'>$</span><span class='va'>row_ids</span>, <span class='fl'>0.8</span> <span class='op'>*</span> <span class='va'>task</span><span class='op'>$</span><span class='va'>nrow</span><span class='op'>)</span>
<span class='va'>test_set</span> <span class='op'>=</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/setops.html'>setdiff</a></span><span class='op'>(</span><span class='va'>task</span><span class='op'>$</span><span class='va'>row_ids</span>, <span class='va'>train_set</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>80 percent of the data is used for training. The remaining 20 percent are used for evaluation at a subsequent later point in time. <code>train_set</code> is an integer vector referring to the selected rows of the original dataset:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>train_set</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 192 887  86 784 801 673</code></pre>
</div>
<p>In <code>mlr3</code> the training with a subset of the data can be declared by the additional argument <code>row_ids = train_set</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learner_logreg</span><span class='op'>$</span><span class='fu'>train</span><span class='op'>(</span><span class='va'>task</span>, row_ids <span class='op'>=</span> <span class='va'>train_set</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The fitted model can be accessed via:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learner_logreg</span><span class='op'>$</span><span class='va'>model</span>
</code></pre>
</div>
<pre><code>
Call:  stats::glm(formula = task$formula(), family = &quot;binomial&quot;, data = task$data(), 
    model = FALSE)

Coefficients:
                                              (Intercept)  
                                                1.6691468  
                                                      age  
                                               -0.0162180  
                                                   amount  
                                                0.0001059  
   credit_historycritical account/other credits elsewhere  
                                                0.0257514  
credit_historyno credits taken/all credits paid back duly  
                                               -0.7236613  
   credit_historyexisting credits paid back duly till now  
                                               -0.9241113  
    credit_historyall credits at this bank paid back duly  
                                               -1.5551600  
                                                 duration  
                                                0.0354770  
                                employment_duration&lt; 1 yr  
                                               -0.0090714  
                      employment_duration1 &lt;= ... &lt; 4 yrs  
                                               -0.4401278  
                      employment_duration4 &lt;= ... &lt; 7 yrs  
                                               -0.8562585  
                              employment_duration&gt;= 7 yrs  
                                               -0.3746667  
                                        foreign_workeryes  
                                               -1.2707370  
                                              housingrent  
                                               -0.3916570  
                                               housingown  
                                               -0.8025495  
                                       installment_rate.L  
                                                0.6950110  
                                       installment_rate.Q  
                                               -0.0160750  
                                       installment_rate.C  
                                               -0.2148696  
                                  jobunskilled - resident  
                                                0.7403678  
                             jobskilled employee/official  
                                                0.6514147  
             jobmanager/self-empl/highly qualif. employee  
                                                0.7615486  
                                         number_credits.L  
                                                0.1128851  
                                         number_credits.Q  
                                                0.3386395  
                                         number_credits.C  
                                                0.6359221  
                                other_debtorsco-applicant  
                                                0.4192059  
                                   other_debtorsguarantor  
                                               -1.0270985  
                            other_installment_plansstores  
                                               -0.1717046  
                              other_installment_plansnone  
                                               -0.5981560  
                                   people_liable3 or more  
                                                0.3628651  
  personal_status_sexfemale : non-single or male : single  
                                               -0.1619900  
                personal_status_sexmale : married/widowed  
                                               -0.8285951  
                       personal_status_sexfemale : single  
                                               -0.5574866  
                                      present_residence.L  
                                                0.2113315  
                                      present_residence.Q  
                                               -0.5229247  
                                      present_residence.C  
                                                0.2983391  
                                     propertycar or other  
                                                0.1891866  
      propertybuilding soc. savings agr. / life insurance  
                                                0.0718602  
                                      propertyreal estate  
                                                1.1254990  
                                         purposecar (new)  
                                               -1.5970826  
                                        purposecar (used)  
                                               -0.4304394  
                               purposefurniture/equipment  
                                               -0.5846949  
                                  purposeradio/television  
                                                0.6918507  
                               purposedomestic appliances  
                                               -0.4275257  
                                           purposerepairs  
                                               -0.0015410  
                                          purposevacation  
                                               -1.2998326  
                                        purposeretraining  
                                               -0.5701959  
                                          purposebusiness  
                                               -1.3273149  
                                      savings... &lt; 100 DM  
                                               -0.2931970  
                               savings100 &lt;= ... &lt; 500 DM  
                                               -0.6003949  
                              savings500 &lt;= ... &lt; 1000 DM  
                                               -1.7184754  
                                    savings... &gt;= 1000 DM  
                                               -0.9217140  
                                         status... &lt; 0 DM  
                                               -0.3182345  
                                   status0&lt;= ... &lt; 200 DM  
                                               -1.2038170  
         status... &gt;= 200 DM / salary for at least 1 year  
                                               -1.7496752  
                       telephoneyes (under customer name)  
                                               -0.3673033  

Degrees of Freedom: 799 Total (i.e. Null);  745 Residual
Null Deviance:      993.7 
Residual Deviance: 702.9    AIC: 812.9</code></pre>
</div>
<p>The stored object is a normal <code>glm</code> object and all its <code>S3</code> methods work as expected:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>learner_logreg</span><span class='op'>$</span><span class='va'>model</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;glm&quot; &quot;lm&quot; </code></pre>
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>learner_logreg</span><span class='op'>$</span><span class='va'>model</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>
Call:
stats::glm(formula = task$formula(), family = &quot;binomial&quot;, data = task$data(), 
    model = FALSE)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-2.4228  -0.6776  -0.3540   0.6724   2.7357  

Coefficients:
                                                            Estimate Std. Error
(Intercept)                                                1.669e+00  1.229e+00
age                                                       -1.622e-02  1.075e-02
amount                                                     1.059e-04  5.213e-05
credit_historycritical account/other credits elsewhere     2.575e-02  6.421e-01
credit_historyno credits taken/all credits paid back duly -7.237e-01  5.066e-01
credit_historyexisting credits paid back duly till now    -9.241e-01  5.559e-01
credit_historyall credits at this bank paid back duly     -1.555e+00  5.013e-01
duration                                                   3.548e-02  1.086e-02
employment_duration&lt; 1 yr                                 -9.071e-03  4.945e-01
employment_duration1 &lt;= ... &lt; 4 yrs                       -4.401e-01  4.730e-01
employment_duration4 &lt;= ... &lt; 7 yrs                       -8.563e-01  5.107e-01
employment_duration&gt;= 7 yrs                               -3.747e-01  4.728e-01
foreign_workeryes                                         -1.271e+00  6.489e-01
housingrent                                               -3.917e-01  2.691e-01
housingown                                                -8.025e-01  5.443e-01
installment_rate.L                                         6.950e-01  2.491e-01
installment_rate.Q                                        -1.607e-02  2.247e-01
installment_rate.C                                        -2.149e-01  2.271e-01
jobunskilled - resident                                    7.404e-01  8.852e-01
jobskilled employee/official                               6.514e-01  8.607e-01
jobmanager/self-empl/highly qualif. employee               7.615e-01  8.835e-01
number_credits.L                                           1.129e-01  7.677e-01
number_credits.Q                                           3.386e-01  6.795e-01
number_credits.C                                           6.359e-01  5.764e-01
other_debtorsco-applicant                                  4.192e-01  4.490e-01
other_debtorsguarantor                                    -1.027e+00  4.654e-01
other_installment_plansstores                             -1.717e-01  4.622e-01
other_installment_plansnone                               -5.982e-01  2.729e-01
people_liable3 or more                                     3.629e-01  2.776e-01
personal_status_sexfemale : non-single or male : single   -1.620e-01  4.411e-01
personal_status_sexmale : married/widowed                 -8.286e-01  4.347e-01
personal_status_sexfemale : single                        -5.575e-01  5.227e-01
present_residence.L                                        2.113e-01  2.417e-01
present_residence.Q                                       -5.229e-01  2.292e-01
present_residence.C                                        2.983e-01  2.276e-01
propertycar or other                                       1.892e-01  2.907e-01
propertybuilding soc. savings agr. / life insurance        7.186e-02  2.713e-01
propertyreal estate                                        1.125e+00  4.843e-01
purposecar (new)                                          -1.597e+00  4.333e-01
purposecar (used)                                         -4.304e-01  2.994e-01
purposefurniture/equipment                                -5.847e-01  2.817e-01
purposeradio/television                                    6.919e-01  8.823e-01
purposedomestic appliances                                -4.275e-01  6.843e-01
purposerepairs                                            -1.541e-03  4.871e-01
purposevacation                                           -1.300e+00  1.241e+00
purposeretraining                                         -5.702e-01  3.809e-01
purposebusiness                                           -1.327e+00  8.467e-01
savings... &lt; 100 DM                                       -2.932e-01  3.240e-01
savings100 &lt;= ... &lt; 500 DM                                -6.004e-01  4.596e-01
savings500 &lt;= ... &lt; 1000 DM                               -1.718e+00  6.767e-01
savings... &gt;= 1000 DM                                     -9.217e-01  3.008e-01
status... &lt; 0 DM                                          -3.182e-01  2.495e-01
status0&lt;= ... &lt; 200 DM                                    -1.204e+00  4.372e-01
status... &gt;= 200 DM / salary for at least 1 year          -1.750e+00  2.652e-01
telephoneyes (under customer name)                        -3.673e-01  2.353e-01
                                                          z value Pr(&gt;|z|)    
(Intercept)                                                 1.358 0.174340    
age                                                        -1.508 0.131467    
amount                                                      2.031 0.042295 *  
credit_historycritical account/other credits elsewhere      0.040 0.968011    
credit_historyno credits taken/all credits paid back duly  -1.428 0.153172    
credit_historyexisting credits paid back duly till now     -1.662 0.096447 .  
credit_historyall credits at this bank paid back duly      -3.102 0.001920 ** 
duration                                                    3.267 0.001088 ** 
employment_duration&lt; 1 yr                                  -0.018 0.985363    
employment_duration1 &lt;= ... &lt; 4 yrs                        -0.931 0.352111    
employment_duration4 &lt;= ... &lt; 7 yrs                        -1.677 0.093588 .  
employment_duration&gt;= 7 yrs                                -0.792 0.428076    
foreign_workeryes                                          -1.958 0.050204 .  
housingrent                                                -1.455 0.145567    
housingown                                                 -1.474 0.140381    
installment_rate.L                                          2.790 0.005275 ** 
installment_rate.Q                                         -0.072 0.942979    
installment_rate.C                                         -0.946 0.344040    
jobunskilled - resident                                     0.836 0.402925    
jobskilled employee/official                                0.757 0.449164    
jobmanager/self-empl/highly qualif. employee                0.862 0.388730    
number_credits.L                                            0.147 0.883091    
number_credits.Q                                            0.498 0.618233    
number_credits.C                                            1.103 0.269927    
other_debtorsco-applicant                                   0.934 0.350458    
other_debtorsguarantor                                     -2.207 0.027324 *  
other_installment_plansstores                              -0.371 0.710269    
other_installment_plansnone                                -2.191 0.028418 *  
people_liable3 or more                                      1.307 0.191235    
personal_status_sexfemale : non-single or male : single    -0.367 0.713460    
personal_status_sexmale : married/widowed                  -1.906 0.056628 .  
personal_status_sexfemale : single                         -1.067 0.286170    
present_residence.L                                         0.874 0.381983    
present_residence.Q                                        -2.281 0.022544 *  
present_residence.C                                         1.311 0.189916    
propertycar or other                                        0.651 0.515160    
propertybuilding soc. savings agr. / life insurance         0.265 0.791094    
propertyreal estate                                         2.324 0.020140 *  
purposecar (new)                                           -3.686 0.000228 ***
purposecar (used)                                          -1.437 0.150588    
purposefurniture/equipment                                 -2.076 0.037912 *  
purposeradio/television                                     0.784 0.432939    
purposedomestic appliances                                 -0.625 0.532118    
purposerepairs                                             -0.003 0.997476    
purposevacation                                            -1.047 0.294888    
purposeretraining                                          -1.497 0.134422    
purposebusiness                                            -1.568 0.116967    
savings... &lt; 100 DM                                        -0.905 0.365452    
savings100 &lt;= ... &lt; 500 DM                                 -1.306 0.191389    
savings500 &lt;= ... &lt; 1000 DM                                -2.539 0.011106 *  
savings... &gt;= 1000 DM                                      -3.064 0.002182 ** 
status... &lt; 0 DM                                           -1.275 0.202197    
status0&lt;= ... &lt; 200 DM                                     -2.753 0.005902 ** 
status... &gt;= 200 DM / salary for at least 1 year           -6.597 4.21e-11 ***
telephoneyes (under customer name)                         -1.561 0.118505    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 993.74  on 799  degrees of freedom
Residual deviance: 702.92  on 745  degrees of freedom
AIC: 812.92

Number of Fisher Scoring iterations: 5</code></pre>
</div>
<h4 id="random-forest">Random Forest</h4>
<p>Just like the logistic regression, we could train a random forest instead. We use the fast implementation from the <a href="https://cran.r-project.org/package=ranger">ranger</a> package. For this, we first need to define the learner and then actually train it.</p>
<p>We now additionally supply the importance argument (<code>importance = "permutation"</code>). Doing so, we override the default and let the learner do feature importance determination based on permutation feature importance:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learner_rf</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span><span class='op'>(</span><span class='st'>"classif.ranger"</span>, importance <span class='op'>=</span> <span class='st'>"permutation"</span><span class='op'>)</span>
<span class='va'>learner_rf</span><span class='op'>$</span><span class='fu'>train</span><span class='op'>(</span><span class='va'>task</span>, row_ids <span class='op'>=</span> <span class='va'>train_set</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We can access the importance values using <code>$importance()</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learner_rf</span><span class='op'>$</span><span class='fu'>importance</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>                 status                duration          credit_history 
           0.0388697506            0.0208104546            0.0133260355 
                 amount                     age                property 
           0.0130547695            0.0066976547            0.0065973740 
                savings     employment_duration other_installment_plans 
           0.0064645652            0.0049669821            0.0043701158 
       installment_rate           other_debtors       present_residence 
           0.0040680736            0.0038743649            0.0034065336 
                housing               telephone                 purpose 
           0.0019102484            0.0015758861            0.0015000563 
         number_credits                     job           people_liable 
           0.0012576237            0.0010075039            0.0003985482 
         foreign_worker     personal_status_sex 
           0.0002345502            0.0002200277 </code></pre>
</div>
<p>In order to obtain a plot for the importance values, we convert the importance to a <a href="https://cran.r-project.org/package=data.table">data.table</a> and then process it with <a href="https://cran.r-project.org/package=ggplot2">ggplot2</a>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>importance</span> <span class='op'>=</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html'>as.data.table</a></span><span class='op'>(</span><span class='va'>learner_rf</span><span class='op'>$</span><span class='fu'>importance</span><span class='op'>(</span><span class='op'>)</span>, keep.rownames <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>importance</span><span class='op'>)</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Feature"</span>, <span class='st'>"Importance"</span><span class='op'>)</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>importance</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/reorder.factor.html'>reorder</a></span><span class='op'>(</span><span class='va'>Feature</span>, <span class='va'>Importance</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='va'>Importance</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_col</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/coord_flip.html'>coord_flip</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>""</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-22-1.png" width="624" /></p>
</div>
<h3 id="prediction">Prediction</h3>
<p>Lets see what the models predict.</p>
<p>After training a model, the model can be used for prediction. Usually, prediction is the main purpose of machine learning models.</p>
<p>In our case, the model can be used to classify new credit applicants w.r.t. their associated credit risk (good vs.bad) on the basis of the features. Typically, machine learning models predict numeric values. In the regression case this is very natural. For classification, most models predict scores or probabilities. Based on these values, one can derive class predictions.</p>
<h4 id="predict-classes">Predict Classes</h4>
<p>First, we directly predict classes:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>pred_logreg</span> <span class='op'>=</span> <span class='va'>learner_logreg</span><span class='op'>$</span><span class='fu'>predict</span><span class='op'>(</span><span class='va'>task</span>, row_ids <span class='op'>=</span> <span class='va'>test_set</span><span class='op'>)</span>
<span class='va'>pred_rf</span> <span class='op'>=</span> <span class='va'>learner_rf</span><span class='op'>$</span><span class='fu'>predict</span><span class='op'>(</span><span class='va'>task</span>, row_ids <span class='op'>=</span> <span class='va'>test_set</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>pred_logreg</span>
</code></pre>
</div>
<pre><code>&lt;PredictionClassif&gt; for 200 observations:
    row_id truth response
         6  good     good
        14   bad     good
        24  good     good
---                      
       995  good     good
       997  good     good
      1000  good     good</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>pred_rf</span>
</code></pre>
</div>
<pre><code>&lt;PredictionClassif&gt; for 200 observations:
    row_id truth response
         6  good     good
        14   bad     good
        24  good     good
---                      
       995  good     good
       997  good      bad
      1000  good      bad</code></pre>
</div>
<p>The <code>$predict()</code> method returns a <a href="https://mlr3.mlr-org.com/reference/Prediction.html"><code>Prediction</code></a> object. It can be converted to a <code>data.table</code> if one wants to use it downstream.</p>
<p>We can also display the prediction results aggregated in a confusion matrix:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>pred_logreg</span><span class='op'>$</span><span class='va'>confusion</span>
</code></pre>
</div>
<pre><code>        truth
response good bad
    good  130  31
    bad    20  19</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>pred_rf</span><span class='op'>$</span><span class='va'>confusion</span>
</code></pre>
</div>
<pre><code>        truth
response good bad
    good  132  36
    bad    18  14</code></pre>
</div>
<h4 id="predict-probabilities">Predict Probabilities</h4>
<p>Most learners may not only predict a class variable (response), but also their degree of belief / uncertainty in a given response. Typically, we achieve this by setting the <code>$predict_type</code> slot of a <code>Learner</code> to <code>"prob"</code>. Sometimes this needs to be done <em>before</em> the learner is trained. Alternatively, we can directly create the learner with this option: <code>lrn("classif.log_reg", predict_type = "prob")</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learner_logreg</span><span class='op'>$</span><span class='va'>predict_type</span> <span class='op'>=</span> <span class='st'>"prob"</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learner_logreg</span><span class='op'>$</span><span class='fu'>predict</span><span class='op'>(</span><span class='va'>task</span>, row_ids <span class='op'>=</span> <span class='va'>test_set</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&lt;PredictionClassif&gt; for 200 observations:
    row_id truth response prob.good   prob.bad
         6  good     good 0.7791016 0.22089840
        14   bad     good 0.6620356 0.33796442
        24  good     good 0.9513071 0.04869289
---                                           
       995  good     good 0.9617661 0.03823388
       997  good     good 0.5904093 0.40959070
      1000  good     good 0.7925998 0.20740022</code></pre>
</div>
<p>Note that sometimes one needs to be cautious when dealing with the probability interpretation of the predictions.</p>
<h3 id="performance-evaluation">Performance Evaluation</h3>
<p>To measure the performance of a learner on new unseen data, we usually mimic the scenario of unseen data by splitting up the data into training and test set. The training set is used for training the learner, and the test set is only used for predicting and evaluating the performance of the trained learner. Numerous resampling methods (cross-validation, bootstrap) repeat the splitting process in different ways.</p>
<p>Within <code>mlr3</code>, we need to specify the resampling strategy using the <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>rsmp()</code></a> function:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>resampling</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span><span class='op'>(</span><span class='st'>"holdout"</span>, ratio <span class='op'>=</span> <span class='fl'>2</span><span class='op'>/</span><span class='fl'>3</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>resampling</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&lt;ResamplingHoldout&gt; with 1 iterations
* Instantiated: FALSE
* Parameters: ratio=0.6667</code></pre>
</div>
<p>Here, we use holdout, a simple train-test split (with just one iteration). We use the <a href="https://mlr3.mlr-org.com/reference/resample.html"><code>resample()</code></a> function to undertake the resampling calculation:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>res</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/resample.html'>resample</a></span><span class='op'>(</span><span class='va'>task</span>, learner <span class='op'>=</span> <span class='va'>learner_logreg</span>, resampling <span class='op'>=</span> <span class='va'>resampling</span><span class='op'>)</span>
<span class='va'>res</span>
</code></pre>
</div>
<pre><code>&lt;ResampleResult&gt; of 1 iterations
* Task: GermanCredit
* Learner: classif.log_reg
* Warnings: 0 in 0 iterations
* Errors: 0 in 0 iterations</code></pre>
</div>
<p>The default score of the measure is included in the <code>$aggregate()</code> slot:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>res</span><span class='op'>$</span><span class='fu'>aggregate</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>classif.ce 
 0.2642643 </code></pre>
</div>
<p>The default measure in this scenario is the <a href="https://mlr3.mlr-org.com/reference/mlr_measures_classif.ce.html"><code>classification error</code></a>. Lower is better.</p>
<p>We can easily run different resampling strategies, e.g.repeated holdout (<code>"subsampling"</code>), or cross validation. Most methods perform repeated train/predict cycles on different data subsets and aggregate the result (usually as the mean). Doing this manually would require us to write loops. <code>mlr3</code> does the job for us:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>resampling</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span><span class='op'>(</span><span class='st'>"subsampling"</span>, repeats <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
<span class='va'>rr</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/resample.html'>resample</a></span><span class='op'>(</span><span class='va'>task</span>, learner <span class='op'>=</span> <span class='va'>learner_logreg</span>, resampling <span class='op'>=</span> <span class='va'>resampling</span><span class='op'>)</span>
<span class='va'>rr</span><span class='op'>$</span><span class='fu'>aggregate</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>classif.ce 
 0.2567568 </code></pre>
</div>
<p>Instead, we could also run cross-validation:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>resampling</span> <span class='op'>=</span> <span class='va'>resampling</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span><span class='op'>(</span><span class='st'>"cv"</span>, folds <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
<span class='va'>rr</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/resample.html'>resample</a></span><span class='op'>(</span><span class='va'>task</span>, learner <span class='op'>=</span> <span class='va'>learner_logreg</span>, resampling <span class='op'>=</span> <span class='va'>resampling</span><span class='op'>)</span>
<span class='va'>rr</span><span class='op'>$</span><span class='fu'>aggregate</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>classif.ce 
     0.253 </code></pre>
</div>
<p><code>mlr3</code> features scores for many more measures. Here, we apply <a href="https://mlr3.mlr-org.com/reference/mlr_measures_classif.fpr.html"><code>mlr_measures_classif.fpr</code></a> for the false positive rate, and <a href="https://mlr3.mlr-org.com/reference/mlr_measures_classif.fnr.html"><code>mlr_measures_classif.fnr</code></a> for the false negative rate. Multiple measures can be provided as a list of measures (which can directly be constructed via <a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html"><code>msrs()</code></a>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='co'># false positive rate</span>
<span class='va'>rr</span><span class='op'>$</span><span class='fu'>aggregate</span><span class='op'>(</span><span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>msr</a></span><span class='op'>(</span><span class='st'>"classif.fpr"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>classif.fpr 
  0.5144825 </code></pre>
<div class="sourceCode">
<pre><code><span class='co'># false positive rate and false negative</span>
<span class='va'>measures</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>msrs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"classif.fpr"</span>, <span class='st'>"classif.fnr"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>rr</span><span class='op'>$</span><span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>measures</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>classif.fpr classif.fnr 
  0.5144825   0.1445804 </code></pre>
</div>
<p>There are a few more resampling methods, and quite a few more measures (implemented in <a href="https://mlr3measures.mlr-org.com">mlr3measures</a>). They are automatically registered in the respective dictionaries:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>mlr_resamplings</span>
</code></pre>
</div>
<pre><code>&lt;DictionaryResampling&gt; with 8 stored values
Keys: bootstrap, custom, cv, holdout, insample, loo, repeated_cv,
  subsampling</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>mlr_measures</span>
</code></pre>
</div>
<pre><code>&lt;DictionaryMeasure&gt; with 54 stored values
Keys: classif.acc, classif.auc, classif.bacc, classif.bbrier,
  classif.ce, classif.costs, classif.dor, classif.fbeta, classif.fdr,
  classif.fn, classif.fnr, classif.fomr, classif.fp, classif.fpr,
  classif.logloss, classif.mbrier, classif.mcc, classif.npv,
  classif.ppv, classif.prauc, classif.precision, classif.recall,
  classif.sensitivity, classif.specificity, classif.tn, classif.tnr,
  classif.tp, classif.tpr, debug, oob_error, regr.bias, regr.ktau,
  regr.mae, regr.mape, regr.maxae, regr.medae, regr.medse, regr.mse,
  regr.msle, regr.pbias, regr.rae, regr.rmse, regr.rmsle, regr.rrse,
  regr.rse, regr.rsq, regr.sae, regr.smape, regr.srho, regr.sse,
  selected_features, time_both, time_predict, time_train</code></pre>
</div>
<p>To get help on a resampling method, use <code>?mlr_resamplings_xxx</code>, for a measure do <code>?mlr_measures_xxx</code>. You can also browse the <a href="https://mlr3.mlr-org.com/reference/index.html">mlr3 reference</a> online.</p>
<p>Note that some measures, for example <a href="https://mlr3.mlr-org.com/reference/mlr_measures_classif.auc.html"><code>AUC</code></a>, require the prediction of probabilities.</p>
<h3 id="performance-comparison-and-benchmarks">Performance Comparison and Benchmarks</h3>
<p>We could compare <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learners</code></a> by evaluating <a href="https://mlr3.mlr-org.com/reference/resample.html"><code>resample()</code></a> for each of them manually. However, <a href="https://mlr3.mlr-org.com/reference/benchmark.html"><code>benchmark()</code></a> automatically performs resampling evaluations for multiple learners and tasks. <a href="https://mlr3.mlr-org.com/reference/benchmark_grid.html"><code>benchmark_grid()</code></a> creates fully crossed designs: Multiple <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learners</code></a> for multiple <a href="https://mlr3.mlr-org.com/reference/Task.html"><code>Tasks</code></a> are compared w.r.t. multiple <a href="https://mlr3.mlr-org.com/reference/Resampling.html"><code>Resamplings</code></a>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learners</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrns</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"classif.log_reg"</span>, <span class='st'>"classif.ranger"</span><span class='op'>)</span>, predict_type <span class='op'>=</span> <span class='st'>"prob"</span><span class='op'>)</span>
<span class='va'>bm_design</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/benchmark_grid.html'>benchmark_grid</a></span><span class='op'>(</span>
  tasks <span class='op'>=</span> <span class='va'>task</span>,
  learners <span class='op'>=</span> <span class='va'>learners</span>,
  resamplings <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span><span class='op'>(</span><span class='st'>"cv"</span>, folds <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='va'>bmr</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/benchmark.html'>benchmark</a></span><span class='op'>(</span><span class='va'>bm_design</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Careful, large benchmarks may take a long time! This one should take less than a minute, however. In general, we want to use parallelization to speed things up on multi-core machines. For parallelization, <code>mlr3</code> relies on the <a href="https://cran.r-project.org/package=future">future</a> package:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='co'>#future::plan("multiprocess") # uncomment for parallelization</span>
</code></pre>
</div>
</div>
<p>In the benchmark we can compare different measures. Here, we look at the <a href="https://mlr3.mlr-org.com/reference/mlr_measures_classif.ce.html"><code>misclassification rate</code></a> and the <a href="https://mlr3.mlr-org.com/reference/mlr_measures_classif.auc.html"><code>AUC</code></a>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>measures</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>msrs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"classif.ce"</span>, <span class='st'>"classif.auc"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>performances</span> <span class='op'>=</span> <span class='va'>bmr</span><span class='op'>$</span><span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>measures</span><span class='op'>)</span>
<span class='va'>performances</span><span class='op'>[</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"learner_id"</span>, <span class='st'>"classif.ce"</span>, <span class='st'>"classif.auc"</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>        learner_id classif.ce classif.auc
1: classif.log_reg      0.244   0.7865278
2:  classif.ranger      0.228   0.8101353</code></pre>
</div>
<p>We see that the two models perform very similarly.</p>
<h2 id="deviating-from-hyperparameters-defaults">Deviating from hyperparameters defaults</h2>
<p>The previously shown techniques build the backbone of a <code>mlr3</code>-featured machine learning workflow. However, in most cases one would never proceed in the way we did. While many R packages have carefully selected default settings, they will not perform optimally in any scenario. Typically, we can select the values of such hyperparameters. The (hyper)parameters of a <a href="https://mlr3.mlr-org.com/reference/Learner.html"><code>Learner</code></a> can be accessed and set via its <a href="https://paradox.mlr-org.com/reference/ParamSet.html"><code>ParamSet</code></a> <code>$param_set</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learner_rf</span><span class='op'>$</span><span class='va'>param_set</span>
</code></pre>
</div>
<pre><code>&lt;ParamSet&gt;
                              id    class lower upper
 1:                        alpha ParamDbl  -Inf   Inf
 2:       always.split.variables ParamUty    NA    NA
 3:                class.weights ParamDbl  -Inf   Inf
 4:                      holdout ParamLgl    NA    NA
 5:                   importance ParamFct    NA    NA
 6:                   keep.inbag ParamLgl    NA    NA
 7:                    max.depth ParamInt  -Inf   Inf
 8:                min.node.size ParamInt     1   Inf
 9:                     min.prop ParamDbl  -Inf   Inf
10:                      minprop ParamDbl  -Inf   Inf
11:                         mtry ParamInt     1   Inf
12:            num.random.splits ParamInt     1   Inf
13:                  num.threads ParamInt     1   Inf
14:                    num.trees ParamInt     1   Inf
15:                    oob.error ParamLgl    NA    NA
16:                  predict.all ParamLgl    NA    NA
17:        regularization.factor ParamUty    NA    NA
18:      regularization.usedepth ParamLgl    NA    NA
19:                      replace ParamLgl    NA    NA
20:    respect.unordered.factors ParamFct    NA    NA
21:              sample.fraction ParamDbl     0     1
22:                  save.memory ParamLgl    NA    NA
23: scale.permutation.importance ParamLgl    NA    NA
24:                    se.method ParamFct    NA    NA
25:                         seed ParamInt  -Inf   Inf
26:         split.select.weights ParamDbl     0     1
27:                    splitrule ParamFct    NA    NA
28:                      verbose ParamLgl    NA    NA
29:                 write.forest ParamLgl    NA    NA
                              id    class lower upper
                                          levels        default    parents
 1:                                                         0.5           
 2:                                              &lt;NoDefault[3]&gt;           
 3:                                                                       
 4:                                   TRUE,FALSE          FALSE           
 5: none,impurity,impurity_corrected,permutation &lt;NoDefault[3]&gt;           
 6:                                   TRUE,FALSE          FALSE           
 7:                                                                       
 8:                                                           1           
 9:                                                         0.1           
10:                                                         0.1           
11:                                              &lt;NoDefault[3]&gt;           
12:                                                           1  splitrule
13:                                              &lt;NoDefault[3]&gt;           
14:                                                         500           
15:                                   TRUE,FALSE           TRUE           
16:                                   TRUE,FALSE          FALSE           
17:                                                           1           
18:                                   TRUE,FALSE          FALSE           
19:                                   TRUE,FALSE           TRUE           
20:                       ignore,order,partition         ignore           
21:                                              &lt;NoDefault[3]&gt;           
22:                                   TRUE,FALSE          FALSE           
23:                                   TRUE,FALSE          FALSE importance
24:                                 jack,infjack        infjack           
25:                                                                       
26:                                              &lt;NoDefault[3]&gt;           
27:                              gini,extratrees           gini           
28:                                   TRUE,FALSE           TRUE           
29:                                   TRUE,FALSE           TRUE           
                                          levels        default    parents
          value
 1:            
 2:            
 3:            
 4:            
 5: permutation
 6:            
 7:            
 8:            
 9:            
10:            
11:            
12:            
13:            
14:            
15:            
16:            
17:            
18:            
19:            
20:            
21:            
22:            
23:            
24:            
25:            
26:            
27:            
28:            
29:            
          value</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>learner_rf</span><span class='op'>$</span><span class='va'>param_set</span><span class='op'>$</span><span class='va'>values</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>We can choose parameters for our learners in two distinct manners. If we have prior knowledge on how the learner should be (hyper-)parameterized, the way to go would be manually entering the parameters in the parameter set. In most cases, however, we would want to tune the learner so that it can search good model configurations itself. For now, we only want to compare a few models.</p>
<p>To get an idea on which parameters can be manipulated, we can investigate the parameters of the original package version or look into the parameter set of the learner:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='co'>## ?ranger::ranger</span>
<span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html'>as.data.table</a></span><span class='op'>(</span><span class='va'>learner_rf</span><span class='op'>$</span><span class='va'>param_set</span><span class='op'>)</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>class</span>, <span class='va'>lower</span>, <span class='va'>upper</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>                              id    class lower upper
 1:                    num.trees ParamInt     1   Inf
 2:                         mtry ParamInt     1   Inf
 3:                   importance ParamFct    NA    NA
 4:                 write.forest ParamLgl    NA    NA
 5:                min.node.size ParamInt     1   Inf
 6:                      replace ParamLgl    NA    NA
 7:              sample.fraction ParamDbl     0     1
 8:                class.weights ParamDbl  -Inf   Inf
 9:                    splitrule ParamFct    NA    NA
10:            num.random.splits ParamInt     1   Inf
11:         split.select.weights ParamDbl     0     1
12:       always.split.variables ParamUty    NA    NA
13:    respect.unordered.factors ParamFct    NA    NA
14: scale.permutation.importance ParamLgl    NA    NA
15:                   keep.inbag ParamLgl    NA    NA
16:                      holdout ParamLgl    NA    NA
17:                  num.threads ParamInt     1   Inf
18:                  save.memory ParamLgl    NA    NA
19:                      verbose ParamLgl    NA    NA
20:                    oob.error ParamLgl    NA    NA
21:                    max.depth ParamInt  -Inf   Inf
22:                        alpha ParamDbl  -Inf   Inf
23:                     min.prop ParamDbl  -Inf   Inf
24:        regularization.factor ParamUty    NA    NA
25:      regularization.usedepth ParamLgl    NA    NA
26:                         seed ParamInt  -Inf   Inf
27:                      minprop ParamDbl  -Inf   Inf
28:                  predict.all ParamLgl    NA    NA
29:                    se.method ParamFct    NA    NA
                              id    class lower upper</code></pre>
</div>
<p>For the random forest two meaningful parameters which steer model complexity are <code>num.trees</code> and <code>mtry</code>. <code>num.trees</code> defaults to <code>500</code> and <code>mtry</code> to <code>floor(sqrt(ncol(data) - 1))</code>, in our case 4.</p>
<p>In the following we aim to train three different learners:</p>
<ol type="1">
<li>The default random forest.</li>
<li>A random forest with <strong>low</strong> <code>num.trees</code> and <strong>low</strong> <code>mtry</code>.</li>
<li>A random forest with <strong>high</strong> <code>num.trees</code> and <strong>high</strong> <code>mtry</code>.</li>
</ol>
<p>We will benchmark their performance on the German credit dataset. For this we construct the three learners and set the parameters accordingly:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>rf_med</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span><span class='op'>(</span><span class='st'>"classif.ranger"</span>, id <span class='op'>=</span> <span class='st'>"med"</span>, predict_type <span class='op'>=</span> <span class='st'>"prob"</span><span class='op'>)</span>

<span class='va'>rf_low</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span><span class='op'>(</span><span class='st'>"classif.ranger"</span>, id <span class='op'>=</span> <span class='st'>"low"</span>, predict_type <span class='op'>=</span> <span class='st'>"prob"</span>,
  num.trees <span class='op'>=</span> <span class='fl'>5</span>, mtry <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>

<span class='va'>rf_high</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span><span class='op'>(</span><span class='st'>"classif.ranger"</span>, id <span class='op'>=</span> <span class='st'>"high"</span>, predict_type <span class='op'>=</span> <span class='st'>"prob"</span>,
  num.trees <span class='op'>=</span> <span class='fl'>1000</span>, mtry <span class='op'>=</span> <span class='fl'>11</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Once the learners are defined, we can benchmark them:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>learners</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>rf_low</span>, <span class='va'>rf_med</span>, <span class='va'>rf_high</span><span class='op'>)</span>
<span class='va'>bm_design</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/benchmark_grid.html'>benchmark_grid</a></span><span class='op'>(</span>
  tasks <span class='op'>=</span> <span class='va'>task</span>,
  learners <span class='op'>=</span> <span class='va'>learners</span>,
  resamplings <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span><span class='op'>(</span><span class='st'>"cv"</span>, folds <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>bmr</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/benchmark.html'>benchmark</a></span><span class='op'>(</span><span class='va'>bm_design</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>bmr</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>&lt;BenchmarkResult&gt; of 30 rows with 3 resampling runs
 nr      task_id learner_id resampling_id iters warnings errors
  1 GermanCredit        low            cv    10        0      0
  2 GermanCredit        med            cv    10        0      0
  3 GermanCredit       high            cv    10        0      0</code></pre>
</div>
<p>We compare misclassification rate and AUC again:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>measures</span> <span class='op'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>msrs</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"classif.ce"</span>, <span class='st'>"classif.auc"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>performances</span> <span class='op'>=</span> <span class='va'>bmr</span><span class='op'>$</span><span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>measures</span><span class='op'>)</span>
<span class='va'>performances</span><span class='op'>[</span>, <span class='fu'>.</span><span class='op'>(</span><span class='va'>learner_id</span>, <span class='va'>classif.ce</span>, <span class='va'>classif.auc</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
<pre><code>   learner_id classif.ce classif.auc
1:        low      0.275   0.7271936
2:        med      0.235   0.7961501
3:       high      0.246   0.7937442</code></pre>
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://mlr3viz.mlr-org.com/reference/autoplot.html'>autoplot</a></span><span class='op'>(</span><span class='va'>bmr</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="2020-03-11-mlr3-basics-german-credit_files/figure-html5/unnamed-chunk-44-1.png" width="624" /></p>
</div>
<p>The low settings seem to underfit a bit, the high setting is comparable to the default setting med.</p>
<h2 id="outlook">Outlook</h2>
<p>This tutorial was a detailed introduction to machine learning workflows within <code>mlr3</code>. Having followed this tutorial you should be able to run your first models yourself. Next to that we spiked into performance evaluation and benchmarking. Furthermore, we showed how to customize learners.</p>
<p>The next parts of the tutorial will go more into depth into additional <code>mlr3</code> topics:</p>
<ul>
<li><p><a href="https://mlr3gallery.mlr-org.com/posts/2020-03-11-mlr3tuning-tutorial-german-credit/">Part II - Tuning</a> introduces you to the <a href="https://mlr3tuning.mlr-org.com">mlr3tuning</a> package</p></li>
<li><p><a href="https://mlr3gallery.mlr-org.com/posts/2020-03-11-mlr3pipelines-tutorial-german-credit/">Part III - Pipelines</a> introduces you to the <a href="https://mlr3pipelines.mlr-org.com">mlr3pipelines</a> package</p></li>
</ul>
<h2 id="appendix">Appendix</h2>
<h3 id="tips">Tips</h3>
<ul>
<li>What are the arguments of <code>tsk()</code>, <code>lrn()</code>, <code>rsmp()</code>, <code>msr()</code> etc. again? <span class="math inline">\(\rightarrow\)</span> Think about the corresponding dictionary:</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='va'>mlr_tasks</span>
</code></pre>
</div>
<pre><code>&lt;DictionaryTask&gt; with 10 stored values
Keys: boston_housing, breast_cancer, german_credit, iris, mtcars, pima,
  sonar, spam, wine, zoo</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>mlr_learners</span>
</code></pre>
</div>
<pre><code>&lt;DictionaryLearner&gt; with 28 stored values
Keys: classif.cv_glmnet, classif.debug, classif.featureless,
  classif.glmnet, classif.kknn, classif.lda, classif.log_reg,
  classif.multinom, classif.naive_bayes, classif.qda, classif.ranger,
  classif.rpart, classif.svm, classif.xgboost, regr.cv_glmnet,
  regr.featureless, regr.glmnet, regr.kknn, regr.km, regr.lm,
  regr.ranger, regr.rpart, regr.svm, regr.xgboost, surv.cv_glmnet,
  surv.glmnet, surv.ranger, surv.xgboost</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>mlr_resamplings</span>
</code></pre>
</div>
<pre><code>&lt;DictionaryResampling&gt; with 8 stored values
Keys: bootstrap, custom, cv, holdout, insample, loo, repeated_cv,
  subsampling</code></pre>
<div class="sourceCode">
<pre><code><span class='va'>mlr_measures</span>
</code></pre>
</div>
<pre><code>&lt;DictionaryMeasure&gt; with 54 stored values
Keys: classif.acc, classif.auc, classif.bacc, classif.bbrier,
  classif.ce, classif.costs, classif.dor, classif.fbeta, classif.fdr,
  classif.fn, classif.fnr, classif.fomr, classif.fp, classif.fpr,
  classif.logloss, classif.mbrier, classif.mcc, classif.npv,
  classif.ppv, classif.prauc, classif.precision, classif.recall,
  classif.sensitivity, classif.specificity, classif.tn, classif.tnr,
  classif.tp, classif.tpr, debug, oob_error, regr.bias, regr.ktau,
  regr.mae, regr.mape, regr.maxae, regr.medae, regr.medse, regr.mse,
  regr.msle, regr.pbias, regr.rae, regr.rmse, regr.rmsle, regr.rrse,
  regr.rse, regr.rsq, regr.sae, regr.smape, regr.srho, regr.sse,
  selected_features, time_both, time_predict, time_train</code></pre>
</div>
<ul>
<li>What are the arguments of a <code>$new()</code> constructor?
<ul>
<li>Check the corresponding help page.</li>
</ul></li>
<li>What are the possible slots and functions of an object?
<ul>
<li>Writing <code>pred_rf$</code>, and pressing &lt;TAB&gt; should work. Otherwise:</li>
</ul></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>pred_rf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;.__enclos_env__&quot; &quot;confusion&quot;       &quot;prob&quot;            &quot;response&quot;       
 [5] &quot;missing&quot;         &quot;truth&quot;           &quot;row_ids&quot;         &quot;man&quot;            
 [9] &quot;predict_types&quot;   &quot;task_properties&quot; &quot;task_type&quot;       &quot;data&quot;           
[13] &quot;set_threshold&quot;   &quot;initialize&quot;      &quot;clone&quot;           &quot;score&quot;          
[17] &quot;help&quot;            &quot;print&quot;           &quot;format&quot;         </code></pre>
</div>
<ul>
<li>How do I see the help file of an object?
<ul>
<li>The documentation is organized by object classes</li>
</ul></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre><code><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>pred_rf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;PredictionClassif&quot; &quot;Prediction&quot;        &quot;R6&quot;               </code></pre>
</div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Binder, et al. (2020, March 11). mlr3gallery: mlr3 Basics - German Credit. Retrieved from https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{binder2020mlr3,
  author = {Binder, Martin and Pfisterer, Florian and Lang, Michel},
  title = {mlr3gallery: mlr3 Basics - German Credit},
  url = {https://mlr3gallery.mlr-org.com/posts/2020-03-11-basics-german-credit/},
  year = {2020}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
